{
  "modelVersion" : "2.2",
  "previousArtifactVersion" : "2.0",
  "id" : "da3f812d-7005-4c69-b9ab-219b46f9e799",
  "name" : "newForm",
  "lastUpdate" : 1671627906159,
  "rows" : [
    [
      {
        "type" : "container",
        "dimension" : {
          "xs" : 12
        },
        "propertyValues" : { },
        "reference" : "5cd3fcb1-8404-4a55-a0cb-b34f7bdc3da5",
        "hasValidationError" : false,
        "id" : "pbContainer",
        "rows" : [
          [
            {
              "type" : "component",
              "dimension" : {
                "md" : 12,
                "sm" : 12,
                "xs" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "labelHidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "readonly" : {
                  "type" : "constant",
                  "value" : false
                },
                "level" : {
                  "type" : "constant",
                  "value" : "Level 1"
                },
                "cssClasses" : {
                  "type" : "constant",
                  "value" : ""
                },
                "widgetId" : {
                  "type" : "constant",
                  "value" : "pbTitle"
                },
                "isDisplayed" : {
                  "type" : "constant",
                  "value" : true
                },
                "label" : {
                  "type" : "constant"
                },
                "text" : {
                  "type" : "interpolation",
                  "value" : "{{ task.displayName }}"
                },
                "alignment" : {
                  "type" : "constant",
                  "value" : "center"
                },
                "class" : {
                  "type" : "constant",
                  "value" : "org.bonitasoft.web.designer.experimental.parametrizedWidget.TitleWidget"
                },
                "dimension" : {
                  "type" : "constant",
                  "value" : 12
                }
              },
              "reference" : "176e08d2-6892-4740-a737-e67655dced78",
              "hasValidationError" : false,
              "id" : "pbTitle"
            }
          ],
          [
            {
              "type" : "component",
              "dimension" : {
                "md" : 12,
                "sm" : 12,
                "xs" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "labelHidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "readonly" : {
                  "type" : "constant",
                  "value" : false
                },
                "cssClasses" : {
                  "type" : "constant",
                  "value" : ""
                },
                "widgetId" : {
                  "type" : "constant",
                  "value" : "pbText"
                },
                "isDisplayed" : {
                  "type" : "constant",
                  "value" : true
                },
                "label" : {
                  "type" : "constant"
                },
                "text" : {
                  "type" : "interpolation",
                  "value" : "{{ task.displayDescription }}"
                },
                "alignment" : {
                  "type" : "constant",
                  "value" : "left"
                },
                "class" : {
                  "type" : "constant",
                  "value" : "org.bonitasoft.web.designer.experimental.parametrizedWidget.TextWidget"
                },
                "dimension" : {
                  "type" : "constant",
                  "value" : 12
                },
                "allowHTML" : {
                  "type" : "constant",
                  "value" : true
                },
                "labelPosition" : {
                  "type" : "constant",
                  "value" : "top"
                },
                "labelWidth" : {
                  "type" : "constant",
                  "value" : 4
                }
              },
              "reference" : "e7ac296f-3ffd-470b-8e51-02b0c2b88ec3",
              "hasValidationError" : false,
              "id" : "pbText"
            }
          ]
        ]
      }
    ],
    [
      {
        "type" : "container",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "repeatedCollection" : {
            "type" : "variable"
          }
        },
        "reference" : "d402fb34-4d3d-4c4d-93f5-0f5de2fe05dc",
        "hasValidationError" : false,
        "id" : "pbContainer",
        "rows" : [
          [
            {
              "type" : "component",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : ""
                },
                "hidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "required" : {
                  "type" : "constant",
                  "value" : false
                },
                "minLength" : {
                  "type" : "constant",
                  "value" : ""
                },
                "maxLength" : {
                  "type" : "constant",
                  "value" : ""
                },
                "readOnly" : {
                  "type" : "constant",
                  "value" : false
                },
                "labelHidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "label" : {
                  "type" : "interpolation",
                  "value" : "Default label"
                },
                "labelPosition" : {
                  "type" : "constant",
                  "value" : "top"
                },
                "labelWidth" : {
                  "type" : "constant",
                  "value" : 4
                },
                "placeholder" : {
                  "type" : "interpolation"
                },
                "value" : {
                  "type" : "variable",
                  "value" : "bonitaToken"
                },
                "type" : {
                  "type" : "constant",
                  "value" : "text"
                },
                "min" : {
                  "type" : "constant"
                },
                "max" : {
                  "type" : "constant"
                },
                "step" : {
                  "type" : "constant",
                  "value" : 1
                }
              },
              "reference" : "3bb3534e-de5c-4a2f-b361-0680c2417f2c",
              "hasValidationError" : false,
              "id" : "pbInput"
            }
          ]
        ]
      }
    ],
    [
      {
        "type" : "formContainer",
        "dimension" : {
          "xs" : 12
        },
        "propertyValues" : { },
        "reference" : "4ae47231-fd35-40b1-a748-afc4050bc92b",
        "hasValidationError" : false,
        "id" : "pbFormContainer",
        "container" : {
          "type" : "container",
          "dimension" : {
            "xs" : 12
          },
          "propertyValues" : { },
          "reference" : "facfc310-6225-43d4-aa71-29b0c3f630fb",
          "hasValidationError" : false,
          "id" : "pbContainer",
          "rows" : [
            [
              {
                "type" : "component",
                "dimension" : {
                  "md" : 6,
                  "sm" : 12,
                  "xs" : 12,
                  "lg" : 6
                },
                "propertyValues" : {
                  "removeItem" : {
                    "type" : "variable"
                  },
                  "cssClasses" : {
                    "type" : "constant",
                    "value" : ""
                  },
                  "widgetId" : {
                    "type" : "constant",
                    "value" : "pbButton"
                  },
                  "buttonStyle" : {
                    "type" : "constant",
                    "value" : "primary"
                  },
                  "isDisplayed" : {
                    "type" : "constant",
                    "value" : true
                  },
                  "label" : {
                    "type" : "constant",
                    "value" : "Submit"
                  },
                  "dataToSend" : {
                    "type" : "expression",
                    "value" : "formOutput"
                  },
                  "labelHidden" : {
                    "type" : "constant",
                    "value" : false
                  },
                  "readonly" : {
                    "type" : "constant",
                    "value" : false
                  },
                  "collectionPosition" : {
                    "type" : "constant"
                  },
                  "targetUrlOnSuccess" : {
                    "type" : "interpolation",
                    "value" : "/bonita"
                  },
                  "action" : {
                    "type" : "constant",
                    "value" : "Submit task"
                  },
                  "collectionToModify" : {
                    "type" : "variable"
                  },
                  "valueToAdd" : {
                    "type" : "expression"
                  },
                  "disabled" : {
                    "type" : "expression",
                    "value" : "!assigned"
                  },
                  "alignment" : {
                    "type" : "constant",
                    "value" : "center"
                  },
                  "class" : {
                    "type" : "constant",
                    "value" : "org.bonitasoft.web.designer.experimental.parametrizedWidget.ButtonWidget"
                  },
                  "dimension" : {
                    "type" : "constant",
                    "value" : 12
                  },
                  "hidden" : {
                    "type" : "constant",
                    "value" : false
                  },
                  "url" : {
                    "type" : "interpolation"
                  },
                  "dataFromSuccess" : {
                    "type" : "variable"
                  },
                  "dataFromError" : {
                    "type" : "variable"
                  }
                },
                "reference" : "e2fdf8bb-5bca-4ca0-bd1e-29a7fa132f15",
                "hasValidationError" : false,
                "id" : "pbButton"
              },
              {
                "type" : "component",
                "dimension" : {
                  "xs" : 12,
                  "sm" : 12,
                  "md" : 6,
                  "lg" : 6
                },
                "propertyValues" : {
                  "cssClasses" : {
                    "type" : "constant",
                    "value" : ""
                  },
                  "hidden" : {
                    "type" : "constant",
                    "value" : false
                  },
                  "disabled" : {
                    "type" : "constant",
                    "value" : false
                  },
                  "label" : {
                    "type" : "interpolation",
                    "value" : "Prendre la tache"
                  },
                  "alignment" : {
                    "type" : "constant",
                    "value" : "left"
                  },
                  "buttonStyle" : {
                    "type" : "constant",
                    "value" : "primary"
                  },
                  "action" : {
                    "type" : "constant",
                    "value" : "PUT"
                  },
                  "url" : {
                    "type" : "interpolation",
                    "value" : "{{url}}"
                  },
                  "dataToSend" : {
                    "type" : "expression",
                    "value" : "dataToSend"
                  },
                  "dataFromSuccess" : {
                    "type" : "variable"
                  },
                  "dataFromError" : {
                    "type" : "variable"
                  },
                  "targetUrlOnSuccess" : {
                    "type" : "interpolation"
                  },
                  "collectionToModify" : {
                    "type" : "variable"
                  },
                  "collectionPosition" : {
                    "type" : "constant",
                    "value" : "Last"
                  },
                  "valueToAdd" : {
                    "type" : "constant"
                  },
                  "removeItem" : {
                    "type" : "variable"
                  }
                },
                "reference" : "0256c016-8014-495a-8c07-d1e617ffbb57",
                "hasValidationError" : false,
                "id" : "pbButton"
              }
            ]
          ]
        }
      }
    ]
  ],
  "assets" : [
    {
      "id" : "9cea6058-b7dd-4add-bb56-920141aa4436",
      "name" : "localization.json",
      "type" : "json",
      "order" : 0,
      "external" : false
    },
    {
      "id" : "2d14438d-a9ba-4e93-92e7-0e08469be4d7",
      "name" : "style.css",
      "type" : "css",
      "order" : 0,
      "external" : false
    }
  ],
  "inactiveAssets" : [ ],
  "variables" : {
    "formInput" : {
      "type" : "json",
      "value" : [
        "{ }"
      ],
      "exposed" : false
    },
    "test" : {
      "type" : "url",
      "value" : [
        "../API/system/session/unusedId"
      ],
      "exposed" : false
    },
    "session" : {
      "type" : "url",
      "value" : [
        "../API/system/session/1"
      ],
      "exposed" : false
    },
    "currentTask" : {
      "type" : "url",
      "value" : [
        "../API/bpm/humanTask/{{taskId}}"
      ],
      "exposed" : false
    },
    "deAssignTaskWhenWindowClosed" : {
      "type" : "expression",
      "value" : [
        "/*window.addEventListener('beforeunload', function (e) {\r",
        "  // Cancel the event\r",
        "  e.preventDefault();\r",
        "  // Chrome requires returnValue to be set\r",
        "  e.returnValue = '';\r",
        "});*/\r",
        "\r",
        "\r",
        "/*window.onunload = function () {\r",
        "\r",
        "   var xhttp = new XMLHttpRequest();\r",
        "var jsonToSend = '{ \"assigned_id\":\"\"}';\r",
        "    xhttp.onreadystatechange = function() {\r",
        "         if (this.readyState == 4 && this.status == 200) {\r",
        "         }\r",
        "    };\r",
        "    xhttp.open(\"PUT\", \"http://localhost:8080/bonita/API/bpm/humanTask/\"+$data.taskId, true);\r",
        "    xhttp.setRequestHeader(\"X-Bonita-API-Token\", $data.bonitaToken);\r",
        "    xhttp.send(jsonToSend);\r",
        "};*/\r",
        "    \r",
        "\r",
        "\r",
        "\r",
        "window.addEventListener(\"beforeunload\", function (e) {\r",
        " \r",
        "   var xhttp = new XMLHttpRequest();\r",
        "var jsonToSend = '{ \"assigned_id\":\"\"}';\r",
        "    xhttp.onreadystatechange = function() {\r",
        "         if (this.readyState == 4 && this.status == 200) {\r",
        "         }\r",
        "    };\r",
        "    xhttp.open(\"PUT\", \"http://localhost:8080/bonita/API/bpm/humanTask/\"+$data.taskId, true);\r",
        "    xhttp.setRequestHeader(\"X-Bonita-API-Token\", $data.bonitaToken);\r",
        "    xhttp.send(jsonToSend);\r",
        "});\r",
        "\r",
        "/*window.addEventListener('beforeunload', function (e) {\r",
        "    // Cancel the event as stated by the standard.\r",
        "   // e.preventDefault();\r",
        "    // Chrome requires returnValue to be set.\r",
        "    e.returnValue = 'nooooooooooooo';\r",
        "});\r",
        "    \r",
        "window.location = 'about:blank';*/"
      ],
      "exposed" : false
    },
    "url" : {
      "type" : "expression",
      "value" : [
        "return \"http://localhost:8080/bonita/API/bpm/humanTask/\"+$data.taskId;"
      ],
      "exposed" : false
    },
    "bonitaToken" : {
      "type" : "expression",
      "value" : [
        "var request = new XMLHttpRequest();\r",
        "request.open(\"GET\", \"http://localhost:8080/bonita/API/system/session/unusedId\", false);\r",
        "request.send();\r",
        "\r",
        "if (request.readyState == 4 && request.status == 200) {\r",
        "             //setTimeout(alert(request.getResponseHeader(\"X-Bonita-API-Token\")),4000);\r",
        "\r",
        "var  returned_data = request.getResponseHeader(\"X-Bonita-API-Token\");\r",
        "            return returned_data;\r",
        "         }\r",
        "return \"indefined\";"
      ],
      "exposed" : false
    },
    "task" : {
      "type" : "url",
      "value" : [
        "../API/bpm/userTask/{{taskId}}"
      ],
      "exposed" : false
    },
    "formOutput" : {
      "type" : "expression",
      "value" : [
        "return {",
        "",
        "};"
      ],
      "exposed" : false
    },
    "context" : {
      "type" : "url",
      "value" : [
        "../API/bpm/userTask/{{taskId}}/context"
      ],
      "exposed" : false
    },
    "assigned" : {
      "type" : "expression",
      "value" : [
        "return $data.currentTask.assigned_id!==\"\";"
      ],
      "exposed" : false
    },
    "AssignTaskToCurrentUser" : {
      "type" : "expression",
      "value" : [
        "var xhttp = new XMLHttpRequest();",
        "//var jsonToSend = '{ \"assigned_id\" : \"201\"}';",
        "var jsonToSend = '{ \"assigned_id\" : \"'+$data.session.user_id+'\"}';",
        "",
        "    xhttp.onreadystatechange = function() {",
        "         if (this.readyState == 4 && this.status == 200) {",
        "         }",
        "    };",
        "    xhttp.open(\"PUT\", \"http://localhost:8080/bonita/API/bpm/humanTask/\"+$data.taskId, true);",
        "    xhttp.setRequestHeader(\"X-Bonita-API-Token\", $data.bonitaToken);",
        "    xhttp.send(jsonToSend);"
      ],
      "exposed" : false
    },
    "taskId" : {
      "type" : "urlparameter",
      "value" : [
        "id"
      ],
      "exposed" : false
    }
  },
  "hasValidationError" : false,
  "uuid" : "da3f812d-7005-4c69-b9ab-219b46f9e799",
  "type" : "form",
  "description" : "Page generated with Bonita UI designer"
}