{
  "modelVersion" : "2.2",
  "previousArtifactVersion" : "2.0",
  "id" : "76e25e45-a455-4491-ad4b-787141be23d4",
  "name" : "pop3pDxxHumanTaskListing",
  "lastUpdate" : 1671627892692,
  "rows" : [
    [
      {
        "type" : "container",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "repeatedCollection" : {
            "type" : "variable"
          }
        },
        "reference" : "87c90249-66aa-4cd5-9541-030354a8d9fa",
        "hasValidationError" : false,
        "id" : "pbContainer",
        "rows" : [
          [
            {
              "type" : "container",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : ""
                },
                "hidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "repeatedCollection" : {
                  "type" : "variable"
                }
              },
              "reference" : "22131cc8-1f9a-42ff-ab28-1f6ba40b89d9",
              "hasValidationError" : false,
              "id" : "pbContainer",
              "rows" : [
                [
                  {
                    "type" : "component",
                    "dimension" : {
                      "xs" : 12,
                      "sm" : 12,
                      "md" : 12,
                      "lg" : 12
                    },
                    "propertyValues" : {
                      "cssClasses" : {
                        "type" : "constant",
                        "value" : ""
                      },
                      "hidden" : {
                        "type" : "constant",
                        "value" : false
                      },
                      "text" : {
                        "type" : "interpolation",
                        "value" : "Filtre de recherche"
                      },
                      "level" : {
                        "type" : "constant",
                        "value" : "Level 4"
                      },
                      "alignment" : {
                        "type" : "constant",
                        "value" : "left"
                      }
                    },
                    "reference" : "15439fd3-e65a-48b5-bdc4-3b3c80a91b22",
                    "hasValidationError" : false,
                    "id" : "pbTitle"
                  }
                ],
                [
                  {
                    "type" : "component",
                    "dimension" : {
                      "xs" : 12,
                      "sm" : 12,
                      "md" : 12,
                      "lg" : 12
                    },
                    "propertyValues" : {
                      "cssClasses" : {
                        "type" : "constant",
                        "value" : ""
                      },
                      "hidden" : {
                        "type" : "constant",
                        "value" : false
                      },
                      "filtersLabels" : {
                        "type" : "expression",
                        "value" : "filtersLabels"
                      },
                      "urlGenerate" : {
                        "type" : "variable",
                        "value" : "urlGenerate"
                      }
                    },
                    "reference" : "8efc3c11-dcc2-4576-8a65-37627b4a340c",
                    "hasValidationError" : false,
                    "id" : "customListFilters"
                  }
                ]
              ]
            }
          ],
          [
            {
              "type" : "component",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : ""
                },
                "hidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "disabled" : {
                  "type" : "constant",
                  "value" : false
                },
                "label" : {
                  "type" : "interpolation",
                  "value" : "<span class=\"glyphicon glyphicon-refresh\"></span> Recharger"
                },
                "alignment" : {
                  "type" : "constant",
                  "value" : "right"
                },
                "buttonStyle" : {
                  "type" : "constant",
                  "value" : "default"
                },
                "action" : {
                  "type" : "constant",
                  "value" : "GET"
                },
                "url" : {
                  "type" : "interpolation",
                  "value" : "{{listValidationTasksURL}}"
                },
                "dataToSend" : {
                  "type" : "constant"
                },
                "dataFromSuccess" : {
                  "type" : "variable",
                  "value" : "listValidationTasks"
                },
                "dataFromError" : {
                  "type" : "variable"
                },
                "targetUrlOnSuccess" : {
                  "type" : "interpolation"
                },
                "collectionToModify" : {
                  "type" : "variable"
                },
                "collectionPosition" : {
                  "type" : "constant",
                  "value" : "Last"
                },
                "valueToAdd" : {
                  "type" : "constant"
                },
                "removeItem" : {
                  "type" : "variable"
                }
              },
              "reference" : "595fb40f-6790-4db3-991d-aa3167461eaf",
              "hasValidationError" : false,
              "id" : "pbButton"
            }
          ],
          [
            {
              "type" : "component",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : ""
                },
                "hidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "headers" : {
                  "type" : "constant",
                  "value" : [
                    "Proposition",
                    "Tache en cours",
                    "Numéro de matériel",
                    "Exercice",
                    "Territoire",
                    "Agence",
                    "Genre matériel",
                    "Montant",
                    "Motif de la demande"
                  ]
                },
                "type" : {
                  "type" : "constant",
                  "value" : "Variable"
                },
                "apiUrl" : {
                  "type" : "constant",
                  "value" : "../API/"
                },
                "params" : {
                  "type" : "constant"
                },
                "content" : {
                  "type" : "expression",
                  "value" : "listValidationTasks"
                },
                "columnsKey" : {
                  "type" : "constant",
                  "value" : [
                    "propositionId",
                    "nameTask",
                    "materialNumber",
                    "budgetYear",
                    "territoryCode",
                    "agencyCode",
                    "typeMaterial",
                    "amount",
                    "typeProposition",
                    "propositionStatus",
                    "dueDate | uiDate:'short'"
                  ]
                },
                "sortColumns" : {
                  "type" : "constant"
                },
                "selectedRow" : {
                  "type" : "variable",
                  "value" : "selectedProposition"
                },
                "pageSize" : {
                  "type" : "constant",
                  "value" : 10
                },
                "filter" : {
                  "type" : "constant"
                },
                "askInfoForProposition" : {
                  "type" : "variable",
                  "value" : "selectedProposition"
                },
                "urlGenerate" : {
                  "type" : "variable",
                  "value" : "urlGenerate"
                }
              },
              "reference" : "06209c08-eedd-44c5-8dd0-be062e42c325",
              "hasValidationError" : false,
              "id" : "customPop3pDxxHumanTaskListing"
            }
          ]
        ]
      }
    ],
    [
      {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : "alert alert-warning"
          },
          "hidden" : {
            "type" : "expression",
            "value" : "listValidationTasks.length > 0"
          },
          "text" : {
            "type" : "interpolation",
            "value" : "<br><b>Aucune proposition à valider <br> actuellement !</b>"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : true
          },
          "label" : {
            "type" : "interpolation",
            "value" : ""
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "top"
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          }
        },
        "reference" : "bffb2662-f054-400b-8fac-a559788438e0",
        "hasValidationError" : false,
        "id" : "pbText"
      }
    ],
    [
      {
        "type" : "container",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "expression",
            "value" : "!propositionAskInfo|| !propositionAskInfo.hasOwnProperty('nameTask')"
          },
          "repeatedCollection" : {
            "type" : "variable"
          }
        },
        "reference" : "7cc4cfec-655d-445a-8d66-a56ab8f72973",
        "hasValidationError" : false,
        "id" : "pbContainer",
        "rows" : [
          [
            {
              "type" : "container",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : "Modal-overlay"
                },
                "hidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "repeatedCollection" : {
                  "type" : "variable"
                }
              },
              "reference" : "b0d1f36c-c3a1-4031-91f8-75cbf0378ffa",
              "hasValidationError" : false,
              "id" : "pbContainer",
              "rows" : [
                [
                  {
                    "type" : "container",
                    "dimension" : {
                      "xs" : 12,
                      "sm" : 12,
                      "md" : 12,
                      "lg" : 12
                    },
                    "propertyValues" : {
                      "cssClasses" : {
                        "type" : "constant",
                        "value" : "Modal-content Modal-content"
                      },
                      "hidden" : {
                        "type" : "constant",
                        "value" : false
                      },
                      "repeatedCollection" : {
                        "type" : "variable"
                      }
                    },
                    "reference" : "7e4eeb76-5e3e-4fd8-b53f-0f866a4bf21f",
                    "hasValidationError" : false,
                    "id" : "pbContainer",
                    "rows" : [
                      [
                        {
                          "type" : "component",
                          "dimension" : {
                            "xs" : 12,
                            "sm" : 12,
                            "md" : 12,
                            "lg" : 12
                          },
                          "propertyValues" : {
                            "cssClasses" : {
                              "type" : "constant",
                              "value" : ""
                            },
                            "hidden" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "text" : {
                              "type" : "interpolation",
                              "value" : "Demande de compléments au SMARTE"
                            },
                            "level" : {
                              "type" : "constant",
                              "value" : "Level 3"
                            },
                            "alignment" : {
                              "type" : "constant",
                              "value" : "left"
                            }
                          },
                          "reference" : "5833d213-b1fe-431b-9f04-e54ce0025210",
                          "hasValidationError" : false,
                          "id" : "pbTitle"
                        }
                      ],
                      [
                        {
                          "type" : "formContainer",
                          "dimension" : {
                            "xs" : 12,
                            "sm" : 12,
                            "md" : 12,
                            "lg" : 12
                          },
                          "propertyValues" : {
                            "cssClasses" : {
                              "type" : "constant",
                              "value" : ""
                            },
                            "hidden" : {
                              "type" : "constant",
                              "value" : false
                            }
                          },
                          "reference" : "1540d6b2-0848-403d-a6ec-235ff38b0f64",
                          "hasValidationError" : false,
                          "id" : "pbFormContainer",
                          "container" : {
                            "type" : "container",
                            "dimension" : {
                              "xs" : 12
                            },
                            "propertyValues" : { },
                            "reference" : "4a219acb-be25-4182-b39a-154dd758050e",
                            "hasValidationError" : false,
                            "id" : "pbContainer",
                            "rows" : [
                              [
                                {
                                  "type" : "component",
                                  "dimension" : {
                                    "xs" : 12,
                                    "sm" : 12,
                                    "md" : 8,
                                    "lg" : 7
                                  },
                                  "propertyValues" : {
                                    "cssClasses" : {
                                      "type" : "constant",
                                      "value" : ""
                                    },
                                    "hidden" : {
                                      "type" : "constant",
                                      "value" : false
                                    },
                                    "readOnly" : {
                                      "type" : "constant",
                                      "value" : false
                                    },
                                    "required" : {
                                      "type" : "constant",
                                      "value" : true
                                    },
                                    "minLength" : {
                                      "type" : "constant",
                                      "value" : ""
                                    },
                                    "maxLength" : {
                                      "type" : "constant",
                                      "value" : ""
                                    },
                                    "labelHidden" : {
                                      "type" : "constant",
                                      "value" : false
                                    },
                                    "label" : {
                                      "type" : "interpolation",
                                      "value" : "Message à envoyer"
                                    },
                                    "labelPosition" : {
                                      "type" : "constant",
                                      "value" : "left"
                                    },
                                    "labelWidth" : {
                                      "type" : "constant",
                                      "value" : 5
                                    },
                                    "value" : {
                                      "type" : "variable",
                                      "value" : "propositionAskInfo.commentInput"
                                    }
                                  },
                                  "reference" : "19ec54df-1b44-4e9d-901b-91548f260479",
                                  "hasValidationError" : false,
                                  "id" : "pbTextarea"
                                }
                              ],
                              [
                                {
                                  "type" : "component",
                                  "dimension" : {
                                    "xs" : 12,
                                    "sm" : 12,
                                    "md" : 6,
                                    "lg" : 6
                                  },
                                  "propertyValues" : {
                                    "cssClasses" : {
                                      "type" : "constant",
                                      "value" : ""
                                    },
                                    "hidden" : {
                                      "type" : "constant",
                                      "value" : false
                                    },
                                    "disabled" : {
                                      "type" : "expression",
                                      "value" : "$form.$invalid"
                                    },
                                    "label" : {
                                      "type" : "interpolation",
                                      "value" : "Demander complément"
                                    },
                                    "alignment" : {
                                      "type" : "constant",
                                      "value" : "left"
                                    },
                                    "buttonStyle" : {
                                      "type" : "constant",
                                      "value" : "primary"
                                    },
                                    "action" : {
                                      "type" : "constant",
                                      "value" : "POST"
                                    },
                                    "url" : {
                                      "type" : "interpolation",
                                      "value" : "../API/extension/executeTask?taskId={{propositionAskInfo.taskId}}"
                                    },
                                    "dataToSend" : {
                                      "type" : "expression",
                                      "value" : "sendComment"
                                    },
                                    "dataFromSuccess" : {
                                      "type" : "variable",
                                      "value" : "listValidationTasks"
                                    },
                                    "dataFromError" : {
                                      "type" : "variable"
                                    },
                                    "targetUrlOnSuccess" : {
                                      "type" : "interpolation",
                                      "value" : "/bonita/apps/approvers"
                                    },
                                    "collectionToModify" : {
                                      "type" : "variable"
                                    },
                                    "collectionPosition" : {
                                      "type" : "constant",
                                      "value" : "Last"
                                    },
                                    "valueToAdd" : {
                                      "type" : "constant"
                                    },
                                    "removeItem" : {
                                      "type" : "variable"
                                    }
                                  },
                                  "reference" : "21d1abe2-2602-4810-8d74-73c44b268194",
                                  "hasValidationError" : false,
                                  "id" : "pbButton"
                                },
                                {
                                  "type" : "component",
                                  "dimension" : {
                                    "xs" : 12,
                                    "sm" : 12,
                                    "md" : 6,
                                    "lg" : 6
                                  },
                                  "propertyValues" : {
                                    "cssClasses" : {
                                      "type" : "constant",
                                      "value" : ""
                                    },
                                    "hidden" : {
                                      "type" : "constant",
                                      "value" : false
                                    },
                                    "value" : {
                                      "type" : "variable",
                                      "value" : "propositionAskInfo"
                                    },
                                    "buttonStyle" : {
                                      "type" : "constant",
                                      "value" : "default"
                                    },
                                    "label" : {
                                      "type" : "constant",
                                      "value" : "Fermer"
                                    },
                                    "alignment" : {
                                      "type" : "constant",
                                      "value" : "right"
                                    }
                                  },
                                  "reference" : "ca8895a8-ee68-4879-9b33-ad8f05217b9c",
                                  "hasValidationError" : false,
                                  "id" : "customClosePopup"
                                }
                              ]
                            ]
                          }
                        }
                      ]
                    ]
                  }
                ]
              ]
            }
          ]
        ]
      }
    ],
    [
      {
        "type" : "container",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "expression",
            "value" : "! getSelectedProposition[0].hasOwnProperty('persistenceId')"
          },
          "repeatedCollection" : {
            "type" : "variable"
          }
        },
        "reference" : "a3f4dec9-88ce-4664-90f9-5ecb9a902ac4",
        "hasValidationError" : false,
        "id" : "pbContainer",
        "rows" : [
          [
            {
              "type" : "container",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : "Modal-overlay"
                },
                "hidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "repeatedCollection" : {
                  "type" : "variable"
                }
              },
              "reference" : "100aa603-4a0f-4506-b67e-2ca81b0aa443",
              "hasValidationError" : false,
              "id" : "pbContainer",
              "rows" : [
                [
                  {
                    "type" : "container",
                    "dimension" : {
                      "xs" : 12,
                      "sm" : 12,
                      "md" : 12,
                      "lg" : 12
                    },
                    "propertyValues" : {
                      "cssClasses" : {
                        "type" : "constant",
                        "value" : "Modal-content"
                      },
                      "hidden" : {
                        "type" : "constant",
                        "value" : false
                      },
                      "repeatedCollection" : {
                        "type" : "variable"
                      }
                    },
                    "reference" : "4d0ff3f9-41ac-4925-b75c-4e1f2ae9b08e",
                    "hasValidationError" : false,
                    "id" : "pbContainer",
                    "rows" : [
                      [
                        {
                          "type" : "fragment",
                          "dimension" : {
                            "xs" : 12,
                            "sm" : 12,
                            "md" : 12,
                            "lg" : 12
                          },
                          "propertyValues" : {
                            "cssClasses" : {
                              "type" : "constant",
                              "value" : ""
                            },
                            "hidden" : {
                              "type" : "constant",
                              "value" : false
                            }
                          },
                          "reference" : "d18a96e2-248f-4119-a026-50df326afc76",
                          "hasValidationError" : false,
                          "id" : "c48e7f08-55e3-4e18-98a4-42fa7d0dd97e",
                          "binding" : {
                            "getSession" : "getSession",
                            "propositionInput" : "getSelectedProposition[0]",
                            "selectedProposition" : "selectedProposition"
                          }
                        }
                      ]
                    ]
                  }
                ]
              ]
            }
          ]
        ]
      }
    ]
  ],
  "assets" : [
    {
      "id" : "0872d139-bfb4-4e94-bed8-88da1ea9a40e",
      "name" : "localization.json",
      "type" : "json",
      "order" : 0,
      "external" : false
    },
    {
      "id" : "f30855be-c416-4c79-8612-f9e40048e134",
      "name" : "customCSS.css",
      "type" : "css",
      "order" : 1,
      "external" : false
    },
    {
      "id" : "ebbd9c0d-5317-49dc-909b-ac5184d13402",
      "name" : "style.css",
      "type" : "css",
      "order" : 0,
      "external" : false
    }
  ],
  "inactiveAssets" : [ ],
  "variables" : {
    "getSelectedPropositionURL" : {
      "type" : "expression",
      "value" : [
        "if ($data.selectedProposition && $data.selectedProposition.hasOwnProperty('propositionId')){",
        "    return \"../API/bdm/businessData/com.sgdbf.model.Proposition?q=findByPersistenceId&p=0&c=1&f=persistenceId=\"",
        "    + $data.selectedProposition.propositionId",
        "}"
      ],
      "exposed" : false
    },
    "filtersLabels" : {
      "type" : "expression",
      "value" : [
        "var result =",
        "[ {",
        "\t\t\"data\": \"budgetYear\",",
        "\t\t\"label\": \"Exercice\",",
        "\t\t\"type\": \"select\",",
        "\t\t\"values\": $data.getBudgetYears",
        "\t},{",
        "\t\t\"data\": \"propositionId\",",
        "\t\t\"label\": \"Id de proposition\",",
        "\t\t\"type\": \"text\",",
        "\t\t\"operator\": \"L\"",
        "\t},{",
        "\t\t\"data\" : \"materialNumber\",",
        "\t\t\"label\" : \"Matériel\",",
        "\t\t\"type\" : \"text\",",
        "\t\t\"operator\":\"L\"",
        "\t},{",
        "\t\t\"data\" : \"propositionStatus\",",
        "\t\t\"label\" : \"Statut\",",
        "\t\t\"type\" : \"text\",",
        "\t\t\"operator\":\"L\"",
        "\t},{",
        "\t\t\"data\" : \"territoryCode\",",
        "\t\t\"label\" : \"Territoire\",",
        "\t\t\"type\" : \"text\",",
        "\t\t\"operator\":\"L\"",
        "\t},{",
        "\t\t\"data\" : \"agencyCode\",",
        "\t\t\"label\" : \"Agence\",",
        "\t\t\"type\" : \"text\",",
        "\t\t\"operator\":\"E\"",
        "\t},{",
        "\t\t\"data\" : \"nameTask\",",
        "\t\t\"label\" : \"Tache en cours\",",
        "\t\t\"type\" : \"select\",",
        "\t\t\"operator\":\"E\",",
        "\t\t\"values\": [\"Recherche d'acquereur\", \"Determination du prix de vente\", \"Facturation par entité\", \"Validation de l'acquéreur\", \"Sortie du matériel\"]",
        "\t},",
        "]",
        "",
        "return result"
      ],
      "exposed" : false
    },
    "selectedProposition" : {
      "type" : "json",
      "value" : [
        "{}"
      ],
      "exposed" : false
    },
    "sendComment" : {
      "type" : "expression",
      "value" : [
        "return {",
        "    \"actionInput\":\"A compléter\",",
        "    \"commentInput\":$data.propositionAskInfo.commentInput",
        "    }"
      ],
      "exposed" : false
    },
    "listValidationTasksURL" : {
      "type" : "expression",
      "value" : [
        "return \"../API/extension/validationTaskList?commande=ApproveDxxSteps\" + $data.urlGenerate"
      ],
      "exposed" : false
    },
    "listValidationTasks" : {
      "type" : "url",
      "value" : [
        "{{listValidationTasksURL}}"
      ],
      "exposed" : false
    },
    "getSession" : {
      "type" : "url",
      "value" : [
        "../API/system/session/1"
      ],
      "exposed" : false
    },
    "getSelectedProposition" : {
      "type" : "url",
      "value" : [
        "{{getSelectedPropositionURL}}"
      ],
      "exposed" : false
    },
    "propositionAskInfo" : {
      "type" : "json",
      "value" : [
        "{}"
      ],
      "exposed" : false
    },
    "tableFilter" : {
      "type" : "constant",
      "exposed" : false
    },
    "urlGenerate" : {
      "type" : "constant",
      "exposed" : false
    },
    "getBudgetYears" : {
      "type" : "expression",
      "value" : [
        "var result = [];",
        "",
        "var now = new Date();",
        "var year = now.getFullYear()",
        "",
        "for (var i = 0; i < 5; i++) {",
        "  result.push(year + i);",
        "}",
        "",
        "return result"
      ],
      "exposed" : false
    }
  },
  "hasValidationError" : false,
  "uuid" : "76e25e45-a455-4491-ad4b-787141be23d4",
  "type" : "page",
  "description" : "Page generated with Bonita UI designer"
}