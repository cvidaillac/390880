{
  "modelVersion" : "2.2",
  "previousArtifactVersion" : "2.0",
  "id" : "2af238af-344c-4bf1-ad40-978ff7c84974",
  "name" : "fragAttachments",
  "lastUpdate" : 1671627880601,
  "rows" : [
    [
      {
        "type" : "container",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 2,
          "lg" : 2
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "repeatedCollection" : {
            "type" : "variable"
          }
        },
        "reference" : "72b4142a-43cd-43be-a025-8e4d6389de55",
        "hasValidationError" : false,
        "id" : "pbContainer",
        "rows" : [
          [ ]
        ]
      },
      {
        "type" : "container",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 8,
          "lg" : 8
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : "panel panel-default"
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "repeatedCollection" : {
            "type" : "variable"
          }
        },
        "reference" : "77c46126-9b10-493d-92d4-0fdbf264fa32",
        "hasValidationError" : false,
        "id" : "pbContainer",
        "rows" : [
          [
            {
              "type" : "component",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : "propositionStyle"
                },
                "hidden" : {
                  "type" : "expression",
                  "value" : "hideViewAttachment"
                },
                "text" : {
                  "type" : "interpolation",
                  "value" : "Pièces jointes associées à la proposition"
                },
                "level" : {
                  "type" : "constant",
                  "value" : "Level 4"
                },
                "alignment" : {
                  "type" : "constant",
                  "value" : "left"
                }
              },
              "reference" : "64786e19-afbd-431e-940b-136063be9d3d",
              "hasValidationError" : false,
              "id" : "pbTitle"
            }
          ],
          [
            {
              "type" : "component",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : ""
                },
                "hidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "disabled" : {
                  "type" : "constant",
                  "value" : false
                },
                "label" : {
                  "type" : "interpolation",
                  "value" : "Ajouter une pièce jointe"
                },
                "alignment" : {
                  "type" : "constant",
                  "value" : "right"
                },
                "buttonStyle" : {
                  "type" : "constant",
                  "value" : "primary"
                },
                "action" : {
                  "type" : "constant",
                  "value" : "Add to collection"
                },
                "url" : {
                  "type" : "interpolation"
                },
                "dataToSend" : {
                  "type" : "constant"
                },
                "dataFromSuccess" : {
                  "type" : "variable"
                },
                "dataFromError" : {
                  "type" : "variable"
                },
                "targetUrlOnSuccess" : {
                  "type" : "interpolation"
                },
                "collectionToModify" : {
                  "type" : "variable",
                  "value" : "proposition.attachmentsContract"
                },
                "collectionPosition" : {
                  "type" : "constant",
                  "value" : "Last"
                },
                "valueToAdd" : {
                  "type" : "constant"
                },
                "removeItem" : {
                  "type" : "variable"
                }
              },
              "reference" : "f9e2729d-87c3-4509-bf70-337b100767de",
              "hasValidationError" : false,
              "id" : "pbButton"
            }
          ],
          [
            {
              "type" : "container",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : "panel-body"
                },
                "hidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "repeatedCollection" : {
                  "type" : "variable"
                }
              },
              "reference" : "4d028e94-1c28-4943-aa27-e4e3712f8f06",
              "hasValidationError" : false,
              "id" : "pbContainer",
              "rows" : [
                [
                  {
                    "type" : "container",
                    "dimension" : {
                      "xs" : 12,
                      "sm" : 12,
                      "md" : 12,
                      "lg" : 12
                    },
                    "propertyValues" : {
                      "cssClasses" : {
                        "type" : "constant",
                        "value" : ""
                      },
                      "hidden" : {
                        "type" : "constant",
                        "value" : false
                      },
                      "repeatedCollection" : {
                        "type" : "variable",
                        "value" : "proposition.attachmentsContract"
                      }
                    },
                    "reference" : "0823ee29-eeb5-4156-8665-fdf7f2ec839a",
                    "hasValidationError" : false,
                    "id" : "pbContainer",
                    "rows" : [
                      [
                        {
                          "type" : "component",
                          "dimension" : {
                            "xs" : 12,
                            "sm" : 6,
                            "md" : 8,
                            "lg" : 8
                          },
                          "propertyValues" : {
                            "cssClasses" : {
                              "type" : "constant",
                              "value" : ""
                            },
                            "hidden" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "required" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "labelHidden" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "label" : {
                              "type" : "interpolation",
                              "value" : "Pièce jointe {{ $index +1 }}"
                            },
                            "labelPosition" : {
                              "type" : "constant",
                              "value" : "left"
                            },
                            "labelWidth" : {
                              "type" : "constant",
                              "value" : 5
                            },
                            "placeholder" : {
                              "type" : "interpolation"
                            },
                            "url" : {
                              "type" : "constant",
                              "value" : "../API/formFileUpload"
                            },
                            "value" : {
                              "type" : "variable",
                              "value" : "$item"
                            },
                            "errorContent" : {
                              "type" : "variable",
                              "value" : ""
                            }
                          },
                          "reference" : "c9891da7-03c7-4b4a-8eb7-00a2947ec649",
                          "hasValidationError" : false,
                          "id" : "pbUpload"
                        },
                        {
                          "type" : "component",
                          "dimension" : {
                            "xs" : 12,
                            "sm" : 12,
                            "md" : 2,
                            "lg" : 2
                          },
                          "propertyValues" : {
                            "cssClasses" : {
                              "type" : "constant",
                              "value" : ""
                            },
                            "hidden" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "disabled" : {
                              "type" : "expression",
                              "value" : "!$item.hasOwnProperty(\"filename\")"
                            },
                            "required" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "labelHidden" : {
                              "type" : "constant",
                              "value" : true
                            },
                            "label" : {
                              "type" : "interpolation",
                              "value" : ""
                            },
                            "labelPosition" : {
                              "type" : "constant",
                              "value" : "top"
                            },
                            "labelWidth" : {
                              "type" : "constant",
                              "value" : 4
                            },
                            "placeholder" : {
                              "type" : "interpolation",
                              "value" : "Autre"
                            },
                            "availableValues" : {
                              "type" : "expression",
                              "value" : "statusListValues"
                            },
                            "displayedKey" : {
                              "type" : "constant"
                            },
                            "returnedKey" : {
                              "type" : "constant"
                            },
                            "value" : {
                              "type" : "variable",
                              "value" : "$item.status"
                            }
                          },
                          "reference" : "5cd9ae42-dee7-47a7-9324-003f3e9b6d02",
                          "hasValidationError" : false,
                          "id" : "pbSelect"
                        },
                        {
                          "type" : "component",
                          "dimension" : {
                            "xs" : 12,
                            "sm" : 6,
                            "md" : 2,
                            "lg" : 2
                          },
                          "propertyValues" : {
                            "cssClasses" : {
                              "type" : "constant",
                              "value" : ""
                            },
                            "hidden" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "disabled" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "label" : {
                              "type" : "interpolation",
                              "value" : "Supprimer"
                            },
                            "alignment" : {
                              "type" : "constant",
                              "value" : "left"
                            },
                            "buttonStyle" : {
                              "type" : "constant",
                              "value" : "danger"
                            },
                            "action" : {
                              "type" : "constant",
                              "value" : "Remove from collection"
                            },
                            "url" : {
                              "type" : "interpolation"
                            },
                            "dataToSend" : {
                              "type" : "constant"
                            },
                            "dataFromSuccess" : {
                              "type" : "variable"
                            },
                            "dataFromError" : {
                              "type" : "variable"
                            },
                            "targetUrlOnSuccess" : {
                              "type" : "interpolation"
                            },
                            "collectionToModify" : {
                              "type" : "variable",
                              "value" : "$collection"
                            },
                            "collectionPosition" : {
                              "type" : "constant",
                              "value" : "Item"
                            },
                            "valueToAdd" : {
                              "type" : "constant"
                            },
                            "removeItem" : {
                              "type" : "variable",
                              "value" : "$item"
                            },
                            "closeOnSuccess" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "modalId" : {
                              "type" : "constant",
                              "value" : ""
                            }
                          },
                          "reference" : "7a2c3ee8-b0ea-4d24-868d-962eafddc245",
                          "hasValidationError" : false,
                          "id" : "pbButton"
                        }
                      ]
                    ]
                  }
                ]
              ]
            }
          ],
          [
            {
              "type" : "container",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : "panel-body"
                },
                "hidden" : {
                  "type" : "expression",
                  "value" : "(! proposition.propositionAttachments || proposition.propositionAttachments.length==0) || hideViewAttachment"
                },
                "repeatedCollection" : {
                  "type" : "variable",
                  "value" : ""
                }
              },
              "reference" : "dea81b1f-23c8-4df7-a653-7a7d3b98717b",
              "hasValidationError" : false,
              "id" : "pbContainer",
              "rows" : [
                [
                  {
                    "type" : "component",
                    "dimension" : {
                      "xs" : 12,
                      "sm" : 12,
                      "md" : 12,
                      "lg" : 12
                    },
                    "propertyValues" : {
                      "cssClasses" : {
                        "type" : "constant",
                        "value" : ""
                      },
                      "hidden" : {
                        "type" : "constant",
                        "value" : false
                      },
                      "text" : {
                        "type" : "interpolation",
                        "value" : "Pièces jointes existantes :"
                      },
                      "level" : {
                        "type" : "constant",
                        "value" : "Level 5"
                      },
                      "alignment" : {
                        "type" : "constant",
                        "value" : "left"
                      }
                    },
                    "reference" : "0f1275c2-8f45-46df-9d6f-ddbd0bf9a2c3",
                    "hasValidationError" : false,
                    "id" : "pbTitle"
                  }
                ],
                [
                  {
                    "type" : "container",
                    "dimension" : {
                      "xs" : 12,
                      "sm" : 12,
                      "md" : 12,
                      "lg" : 12
                    },
                    "propertyValues" : {
                      "cssClasses" : {
                        "type" : "constant",
                        "value" : ""
                      },
                      "hidden" : {
                        "type" : "constant",
                        "value" : false
                      },
                      "repeatedCollection" : {
                        "type" : "variable",
                        "value" : "proposition.propositionAttachments"
                      }
                    },
                    "reference" : "312981b3-55a8-431c-b07e-96f64dfeed15",
                    "hasValidationError" : false,
                    "id" : "pbContainer",
                    "rows" : [
                      [
                        {
                          "type" : "container",
                          "dimension" : {
                            "xs" : 12,
                            "sm" : 12,
                            "md" : 1,
                            "lg" : 1
                          },
                          "propertyValues" : {
                            "cssClasses" : {
                              "type" : "constant",
                              "value" : ""
                            },
                            "hidden" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "repeatedCollection" : {
                              "type" : "variable",
                              "value" : ""
                            }
                          },
                          "reference" : "9ad955e7-114b-4d8c-8bd0-0d6e3b92e4fe",
                          "hasValidationError" : false,
                          "id" : "pbContainer",
                          "rows" : [
                            [ ]
                          ]
                        },
                        {
                          "type" : "component",
                          "dimension" : {
                            "xs" : 12,
                            "sm" : 12,
                            "md" : 9,
                            "lg" : 9
                          },
                          "propertyValues" : {
                            "cssClasses" : {
                              "type" : "constant",
                              "value" : ""
                            },
                            "hidden" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "text" : {
                              "type" : "interpolation",
                              "value" : "<b>[{{$item.status}}]</b> - {{$item.docFileName}}"
                            },
                            "type" : {
                              "type" : "constant",
                              "value" : "URL"
                            },
                            "targetUrl" : {
                              "type" : "expression",
                              "value" : "$item.docUrl_url"
                            },
                            "pageToken" : {
                              "type" : "constant"
                            },
                            "processName" : {
                              "type" : "constant"
                            },
                            "processVersion" : {
                              "type" : "constant"
                            },
                            "taskId" : {
                              "type" : "constant"
                            },
                            "caseId" : {
                              "type" : "constant"
                            },
                            "target" : {
                              "type" : "constant",
                              "value" : "_self"
                            },
                            "appToken" : {
                              "type" : "constant"
                            },
                            "urlParams" : {
                              "type" : "constant"
                            },
                            "alignment" : {
                              "type" : "constant",
                              "value" : "left"
                            },
                            "buttonStyle" : {
                              "type" : "constant",
                              "value" : "link"
                            }
                          },
                          "reference" : "9ac2f822-ca7f-4dc8-ba9f-04796cafaf6f",
                          "hasValidationError" : false,
                          "id" : "pbLink"
                        },
                        {
                          "type" : "component",
                          "dimension" : {
                            "xs" : 12,
                            "sm" : 12,
                            "md" : 2,
                            "lg" : 2
                          },
                          "propertyValues" : {
                            "cssClasses" : {
                              "type" : "constant",
                              "value" : ""
                            },
                            "hidden" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "disabled" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "label" : {
                              "type" : "interpolation",
                              "value" : "Supprimer"
                            },
                            "alignment" : {
                              "type" : "constant",
                              "value" : "right"
                            },
                            "buttonStyle" : {
                              "type" : "constant",
                              "value" : "danger"
                            },
                            "action" : {
                              "type" : "constant",
                              "value" : "Remove from collection"
                            },
                            "url" : {
                              "type" : "interpolation"
                            },
                            "dataToSend" : {
                              "type" : "constant"
                            },
                            "dataFromSuccess" : {
                              "type" : "variable",
                              "value" : ""
                            },
                            "closeOnSuccess" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "dataFromError" : {
                              "type" : "variable",
                              "value" : ""
                            },
                            "targetUrlOnSuccess" : {
                              "type" : "interpolation"
                            },
                            "collectionToModify" : {
                              "type" : "variable",
                              "value" : "$collection"
                            },
                            "modalId" : {
                              "type" : "constant",
                              "value" : ""
                            },
                            "collectionPosition" : {
                              "type" : "constant",
                              "value" : "Item"
                            },
                            "valueToAdd" : {
                              "type" : "constant"
                            },
                            "removeItem" : {
                              "type" : "variable",
                              "value" : "$item"
                            }
                          },
                          "reference" : "a455dc11-003b-4291-879a-1efac99ed310",
                          "hasValidationError" : false,
                          "id" : "pbButton"
                        }
                      ]
                    ]
                  }
                ]
              ]
            }
          ]
        ]
      }
    ]
  ],
  "assets" : [ ],
  "inactiveAssets" : [ ],
  "variables" : {
    "hideViewAttachment" : {
      "type" : "constant",
      "value" : [
        ""
      ],
      "exposed" : true
    },
    "proposition" : {
      "type" : "constant",
      "value" : [
        ""
      ],
      "exposed" : true
    },
    "updateURL" : {
      "type" : "expression",
      "value" : [
        "if ($data.proposition.propositionAttachments) {",
        "    for(var file in $data.proposition.propositionAttachments) {",
        "        console.log($data.proposition.propositionAttachments[file].docUrl);",
        "        var url = \"/bonita/portal/\"+ encodeURI($data.proposition.propositionAttachments[file].docUrl);",
        "    ",
        "        $data.proposition.propositionAttachments[file].docUrl_url = url;",
        "    }",
        "    ",
        "}"
      ],
      "exposed" : false
    },
    "statusListValues" : {
      "type" : "json",
      "value" : [
        "[\"Autre\",\r",
        "\"Devis\",\r",
        "\"Justificatif\",\r",
        "\"Dossier financier\",\r",
        "\"Planning de réalisation\",\r",
        "\"Contacts\"\r",
        "]"
      ],
      "exposed" : false
    }
  },
  "hasValidationError" : false,
  "type" : "fragment"
}